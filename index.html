<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Request Manager</title>
  <?!= include('styles'); ?>
</head>
<body data-active-tab="supplies">
  <div
    id="pageLoadingBar"
    class="page-loading-bar"
    role="progressbar"
    aria-label="Loading progress"
    aria-valuemin="0"
    aria-valuemax="100"
    aria-valuenow="0"
    aria-hidden="true"
  >
    <div class="page-loading-bar-progress"></div>
  </div>
  <header>
    <div class="hero-inner">
      <div class="hero-copy">
        <span class="hero-eyebrow">Operations hub</span>
        <h1 class="hero-title">Manage every request from one streamlined workspace</h1>
        <p class="hero-description">
          Submit Supplies, IT, and Maintenance needs in seconds. Track approvals and follow-ups without bouncing between
          Systems or Inboxes.
        </p>
        <div class="hero-actions">
          <button type="button" data-tab-trigger="supplies" class="active">Start a Supplies Request</button>
          <button type="button" data-tab-trigger="it">Log an IT Issue</button>
          <button type="button" data-tab-trigger="maintenance">Log Maintenance Issues</button>
        </div>
        <div class="hero-stats">
          <div class="hero-stat">
            <strong data-dashboard-outstanding="all">‚Äî</strong>
            <span>Awaiting action</span>
          </div>
          <div class="hero-stat">
            <strong data-dashboard-total="all">‚Äî</strong>
            <span>Total requests logged</span>
          </div>
        </div>
        <section
          class="hero-insights-card"
          id="topInsightsCard"
          aria-live="polite"
        >
          <div class="hero-insights-heading">
            <h2>Location insights</h2>
            <p>Locate hotspots across stores and prioritize the next wave of requests.</p>
          </div>
          <div class="hero-insights-panels">
            <article class="hero-insight-panel" data-insight-panel="supplies">
              <div class="hero-insight-header">
                <h3>Supplies</h3>
                <button
                  type="button"
                  class="insight-action"
                  data-insights-view="supplies"
                  data-default-label="View details"
                  aria-label="View details"
                >
                  <span class="insight-action-text" aria-hidden="true">
                    <span>View</span>
                    <span>details</span>
                  </span>
                </button>
              </div>
              <p class="hero-insight-subtitle">All-time top 5 Supplies requests, ranked by total quantity &amp; location.</p>
              <ol class="insight-list" id="topSuppliesByLocation"></ol>
              <p class="insight-empty" id="topSuppliesEmpty">No supplies requests yet.</p>
            </article>
            <article class="hero-insight-panel" data-insight-panel="technical">
              <div class="hero-insight-header">
                <h3>IT/Maintenance</h3>
                <button
                  type="button"
                  class="insight-action"
                  data-insights-view="technical"
                  data-default-label="View details"
                  aria-label="View details"
                >
                  <span class="insight-action-text" aria-hidden="true">
                    <span>View</span>
                    <span>details</span>
                  </span>
                </button>
              </div>
              <p class="hero-insight-subtitle">All-time top 5 IT &amp; Maintenance requests by volume per location.</p>
              <ol class="insight-list" id="topTechByLocation"></ol>
              <p class="insight-empty" id="topTechEmpty">No IT or Maintenance requests yet.</p>
            </article>
          </div>
        </section>
      </div>
      <div class="hero-dashboard-shell">
        <img
          class="hero-dashboard-logo"
          src="https://www.dublincleaners.com/wp-content/uploads/2024/12/Dublin-Logos-stacked.png"
          alt="Dublin Cleaners logo"
          loading="lazy"
          decoding="async"
          width="180"
        >
        <section
          class="hero-dashboard"
          id="heroDashboard"
          aria-label="Request activity dashboard"
          aria-live="polite"
        >
          <div class="dashboard-top">
            <div class="dashboard-header">
              <div class="dashboard-header-top">
                <h2 class="dashboard-title">Requests Dashboard</h2>
                <p class="meta" id="dashboardUpdatedAt">Awaiting data‚Ä¶</p>
              </div>
              <p class="dashboard-subcopy">Monitor throughput across all Requests and quickly spot bottlenecks.</p>
            </div>
            <div class="dashboard-visual">
              <canvas id="dashboardPie" width="260" height="260" role="img" aria-label="Outstanding requests by type"></canvas>
            </div>
          </div>
          <div class="dashboard-grid">
            <article class="dashboard-card" data-dashboard-card="supplies">
              <h3>Supplies</h3>
              <div class="metric-group">
                <span class="metric highlight">
                  <strong data-dashboard-outstanding="supplies">‚Äî</strong>
                  Open items
                </span>
                <span class="metric">
                  <strong data-dashboard-total="supplies">‚Äî</strong>
                  Logged total
                </span>
                <span class="metric" data-dashboard-denied-ratio-wrapper="supplies">
                  <strong data-dashboard-denied-ratio="supplies">‚Äî</strong>
                  Denied vs approved ratio
                </span>
                <span class="metric" data-dashboard-avg-completion-wrapper="supplies">
                  <strong data-dashboard-avg-completion="supplies">‚Äî</strong>
                  Avg completion time
                </span>
              </div>
            </article>
            <article class="dashboard-card" data-dashboard-card="it">
              <h3>IT</h3>
              <div class="metric-group">
                <span class="metric highlight">
                  <strong data-dashboard-outstanding="it">‚Äî</strong>
                  Open items
                </span>
                <span class="metric">
                  <strong data-dashboard-total="it">‚Äî</strong>
                  Logged total
                </span>
                <span class="metric" data-dashboard-avg-start-wrapper="it">
                  <strong data-dashboard-avg-start="it">‚Äî</strong>
                  Avg time till work started
                </span>
                <span class="metric" data-dashboard-avg-completion-wrapper="it">
                  <strong data-dashboard-avg-completion="it">‚Äî</strong>
                  Avg completion time
                </span>
              </div>
            </article>
            <article class="dashboard-card" data-dashboard-card="maintenance">
              <h3>Maintenance</h3>
              <div class="metric-group">
                <span class="metric highlight">
                  <strong data-dashboard-outstanding="maintenance">‚Äî</strong>
                  Open items
                </span>
                <span class="metric">
                  <strong data-dashboard-total="maintenance">‚Äî</strong>
                  Logged total
                </span>
                <span class="metric" data-dashboard-avg-start-wrapper="maintenance">
                  <strong data-dashboard-avg-start="maintenance">‚Äî</strong>
                  Avg time till work started
                </span>
                <span class="metric" data-dashboard-avg-completion-wrapper="maintenance">
                  <strong data-dashboard-avg-completion="maintenance">‚Äî</strong>
                  Avg completion time
                </span>
              </div>
            </article>
          </div>
          <p class="dashboard-empty" id="dashboardEmptyMessage" hidden>No requests yet.</p>
        </section>
      </div>
    </div>
  </header>
  <button
    type="button"
    id="feedbackLauncher"
    class="feedback-fab"
    aria-haspopup="dialog"
    aria-controls="feedbackDialog"
    aria-expanded="false"
  >
    <span class="feedback-fab-emoji" aria-hidden="true">üí°</span>
    <span class="feedback-fab-label">Share an idea</span>
  </button>

  <div
    id="feedbackDialog"
    class="feedback-dialog"
    role="dialog"
    aria-modal="true"
    aria-labelledby="feedbackTitle"
    hidden
  >
    <div class="feedback-card" role="document">
      <button type="button" id="feedbackCloseButton" class="feedback-close modal-close" aria-label="Close feedback form">√ó</button>
      <div class="feedback-header">
        <h2 id="feedbackTitle">Help us shine brighter ‚ú®</h2>
        <p class="feedback-subtitle">Share a bug or improvement idea‚Äîonly one quick note is required, and you can stay anonymous.</p>
      </div>
      <form id="feedbackForm" class="feedback-form" novalidate>
        <fieldset>
          <legend>I'm sharing</legend>
          <div class="feedback-type-options">
            <label class="feedback-chip" data-selected="false">
              <input type="radio" name="feedbackType" value="improvement" required>
              <span class="feedback-chip-label">Improvement üåü</span>
            </label>
            <label class="feedback-chip" data-selected="false">
              <input type="radio" name="feedbackType" value="bug" required>
              <span class="feedback-chip-label">Bug üêû</span>
            </label>
            <label class="feedback-chip" data-selected="false">
              <input type="radio" name="feedbackType" value="other" required>
              <span class="feedback-chip-label">Other idea üí¨</span>
            </label>
          </div>
        </fieldset>
        <p class="feedback-note">Pick the option that fits best. We just need the story‚Äîno personal details required.</p>
        <label>
          <span>
            Quick headline
            <span class="feedback-optional">(optional)</span>
          </span>
          <input
            id="feedbackSummary"
            name="summary"
            type="text"
            maxlength="120"
            placeholder="e.g., Faster search results for catalog items"
          >
        </label>
        <label>
          <span>
            Tell us what happened
            <span class="feedback-required" aria-hidden="true">*</span>
          </span>
          <textarea
            id="feedbackDetails"
            name="details"
            placeholder="Share the bug, idea, or context in your own words."
            required
          ></textarea>
        </label>
        <label>
          <span>
            How can we follow up?
            <span class="feedback-optional">(optional)</span>
          </span>
          <input
            id="feedbackContact"
            name="contact"
            type="text"
            inputmode="email"
            autocomplete="off"
            placeholder="Share an email or chat handle, or leave blank to stay anonymous"
          >
        </label>
        <div id="feedbackStatus" class="feedback-status" role="status" aria-live="polite" hidden></div>
        <div class="feedback-actions">
          <button type="button" id="feedbackCancelButton" class="secondary">Not now</button>
          <button type="submit" id="feedbackSubmitButton">Send to the crew üöÄ</button>
        </div>
      </form>
    </div>
  </div>
  <div
    id="insightsModal"
    class="insights-modal"
    role="dialog"
    aria-modal="true"
    aria-labelledby="insightsModalTitle"
    aria-describedby="insightsModalDescription"
    hidden
  >
    <div id="insightsModalCard" class="insights-modal-card" role="document" tabindex="-1">
      <div class="insights-modal-header">
        <h2 id="insightsModalTitle">Location insights</h2>
        <button
          type="button"
          id="insightsModalClose"
          class="insights-modal-close modal-close"
          aria-label="Close insights"
        >
          √ó
        </button>
      </div>
      <p id="insightsModalDescription" class="insights-modal-description">
        Review the latest ranking of requests without leaving the page.
      </p>
      <div class="insights-modal-body" id="insightsModalBody" role="presentation"></div>
      <p id="insightsModalEmpty" class="insights-modal-empty" hidden>No insights to show yet.</p>
    </div>
  </div>
  <div class="page-shell">
    <nav class="tab-nav" aria-label="Request types">
      <button type="button" data-tab-trigger="supplies" class="active">Supplies</button>
      <button type="button" data-tab-trigger="it">IT</button>
      <button type="button" data-tab-trigger="maintenance">Maintenance</button>
    </nav>
    <div id="statusAuthNotice" class="notice" hidden></div>
    <main>
    <div class="tab-panel active" data-tab-panel="supplies">
      <section class="card" id="suppliesFormCard">
        <div class="card-header">
          <div class="card-header-text">
            <span class="card-title">New supplies request</span>
            <span class="card-subtitle meta">Use the catalog to quickly Search & fill in the item details before submitting.</span>
          </div>
          <button type="button" id="catalogScrollButton" class="card-header-action">Full Catalog</button>
        </div>
        <div class="card-body">
          <form id="suppliesForm" class="form-grid" novalidate>
            <label class="full-width">
              <span>Catalog item</span>
              <div class="catalog-field">
                <div class="catalog-combobox" role="group" aria-label="Catalog search">
                  <div class="catalog-search">
                    <input
                      id="catalogSearch"
                      type="search"
                      name="catalogSearch"
                      placeholder="Search by name, category, or SKU"
                      autocomplete="off"
                      spellcheck="false"
                      list="catalogOptions"
                      aria-autocomplete="list"
                    >
                    <button type="button" id="catalogClearButton" class="catalog-clear" aria-label="Clear selected catalog item">√ó</button>
                    <datalist id="catalogOptions"></datalist>
                  </div>
                </div>
                <input id="catalogSkuField" name="catalogSku" type="hidden">
              </div>
              <span class="input-helper custom-item-alert">Can't find it? Enter a Custom Item below.</span>
            </label>
            <label class="full-width">
              <span>Item name</span>
              <input
                id="suppliesDescription"
                name="description"
                type="text"
                placeholder="e.g., 2XL rubber gloves"
                autocomplete="off"
                required
              >
            </label>
            <label class="full-width requester-name-field" data-name-field="supplies">
              <span>Your name</span>
              <input id="suppliesRequesterName" name="requesterName" type="text" autocomplete="name">
            </label>
            <label>
              <span>Location</span>
              <select id="suppliesLocation" name="location" required>
                <option value="">Select a location</option>
                <option value="Plant">Plant</option>
                <option value="Short N.">Short N.</option>
                <option value="Frantz Rd.">Frantz Rd.</option>
                <option value="Muirfield">Muirfield</option>
                <option value="Morse Rd.">Morse Rd.</option>
                <option value="Granville">Granville</option>
                <option value="Newark">Newark</option>
              </select>
            </label>
            <label>
              <span>Quantity</span>
              <input id="suppliesQty" name="qty" type="number" min="1" step="1" required>
            </label>
            <label class="checkbox-field full-width">
              <input
                id="suppliesPlantCheck"
                name="plantCheck"
                type="checkbox"
                required
              >
              <span>I have checked with the Plant & searched all our supply cabinets?</span>
            </label>
            <label class="full-width">
              <span>Notes (optional)</span>
              <textarea id="suppliesNotes" name="notes" autocomplete="off"></textarea>
            </label>
          <div class="inline-buttons full-width">
            <button type="submit" id="suppliesSubmitButton">Submit request</button>
            <button type="button" id="suppliesResetButton" class="secondary">Reset</button>
          </div>
          <aside class="notice-block full-width" role="note" aria-label="Supply request approval process">
            <h3>Supply request approvals</h3>
            <p>All supply requests must be reviewed and approved by a Manager. Approved orders are placed once per week, every MONDAY.</p>
            <p>If your request is not included in that week‚Äôs order, it will automatically roll over to the following week. Please plan ahead and submit requests before your supplies run low. This process keeps ordering consistent, efficient, and ensures smooth operations.</p>
          </aside>
          <div
            class="approver-notice"
            data-approver-notice="supplies"
            role="alert"
            hidden
          ></div>
        </form>
      </div>
    </section>

      <section class="card" id="suppliesRequestsCard">
        <div class="card-header">
          <div class="card-header-text">
            <span class="card-title">Supplies requests</span>
            <span class="card-subtitle meta">Track order status and approvals in one place.</span>
          </div>
        </div>
        <div class="card-body">
          <div id="suppliesRequestsList" class="list" role="list"></div>
          <button type="button" id="suppliesMoreButton" class="load-more secondary">Load more</button>
        </div>
      </section>

      <section class="card" id="catalogCard">
        <div class="card-header">
          <div class="card-header-text">
            <span class="card-title">Catalog</span>
            <span class="card-subtitle meta">Tap an item to autofill the request form.</span>
          </div>
        </div>
        <div class="card-body">
          <div id="catalogList" class="list" role="list"></div>
          <button type="button" id="catalogMoreButton" class="load-more secondary">Load more</button>
        </div>
      </section>
    </div>

    <div class="tab-panel" data-tab-panel="it">
      <section class="card" id="itFormCard">
        <div class="card-header">
          <div class="card-header-text">
            <span class="card-title">New IT request</span>
            <span class="card-subtitle meta">Report technology issues or access needs for quick routing.</span>
          </div>
        </div>
        <div class="card-body">
          <form id="itForm" class="form-grid" novalidate>
            <label>
              <span>Location</span>
              <select id="itLocation" name="location" required>
                <option value="">Select a location</option>
                <option value="Plant">Plant</option>
                <option value="Short N.">Short N.</option>
                <option value="Frantz Rd.">Frantz Rd.</option>
                <option value="Muirfield">Muirfield</option>
                <option value="Morse Rd.">Morse Rd.</option>
                <option value="Granville">Granville</option>
                <option value="Newark">Newark</option>
              </select>
            </label>
            <label class="full-width requester-name-field" data-name-field="it">
              <span>Your name</span>
              <input id="itRequesterName" name="requesterName" type="text" autocomplete="name">
            </label>
            <label class="full-width">
              <span>Issue summary</span>
              <textarea id="itIssue" name="issue" autocomplete="off" required></textarea>
            </label>
            <label>
              <span>Device or system</span>
              <input id="itDevice" name="device" type="text" autocomplete="off">
            </label>
            <label>
              <span>Urgency</span>
              <select id="itUrgency" name="urgency">
                <option value="low">Low</option>
                <option value="normal">Normal</option>
                <option value="critical">Critical</option>
              </select>
            </label>
            <label class="full-width">
              <span>Additional details</span>
              <textarea id="itDetails" name="details" autocomplete="off"></textarea>
            </label>
            <div class="inline-buttons full-width">
              <button type="submit" id="itSubmitButton">Submit request</button>
              <button type="button" id="itResetButton" class="secondary">Reset</button>
            </div>
            <div
              class="approver-notice"
              data-approver-notice="it"
              role="alert"
              hidden
            ></div>
          </form>
        </div>
      </section>

      <section class="card" id="itRequestsCard">
        <div class="card-header">
          <div class="card-header-text">
            <span class="card-title">IT queue</span>
            <span class="card-subtitle meta">Monitor progress and close items when resolved.</span>
          </div>
        </div>
        <div class="card-body">
          <div id="itRequestsList" class="list" role="list"></div>
          <button type="button" id="itMoreButton" class="load-more secondary">Load more</button>
        </div>
      </section>
    </div>

    <div class="tab-panel" data-tab-panel="maintenance">
      <section class="card" id="maintenanceFormCard">
        <div class="card-header">
          <div class="card-header-text">
            <span class="card-title">New maintenance request</span>
            <span class="card-subtitle meta">Share location details so facilities can prioritize the work.</span>
          </div>
        </div>
        <div class="card-body">
          <form id="maintenanceForm" class="form-grid" novalidate>
            <label>
              <span>Location</span>
              <select id="maintenanceLocation" name="location" required>
                <option value="">Select a location</option>
                <option value="Plant">Plant</option>
                <option value="Short N.">Short N.</option>
                <option value="Frantz Rd.">Frantz Rd.</option>
                <option value="Muirfield">Muirfield</option>
                <option value="Morse Rd.">Morse Rd.</option>
                <option value="Granville">Granville</option>
                <option value="Newark">Newark</option>
              </select>
            </label>
            <label class="full-width requester-name-field" data-name-field="maintenance">
              <span>Your name</span>
              <input id="maintenanceRequesterName" name="requesterName" type="text" autocomplete="name">
            </label>
            <label class="full-width">
              <span>Issue description</span>
              <textarea id="maintenanceIssue" name="issue" autocomplete="off" required></textarea>
            </label>
            <label>
              <span>Urgency</span>
              <select id="maintenanceUrgency" name="urgency">
                <option value="low">Low</option>
                <option value="normal">Normal</option>
                <option value="critical">Critical</option>
              </select>
            </label>
            <label class="full-width">
              <span>Access notes (optional)</span>
              <textarea id="maintenanceAccessNotes" name="accessNotes" autocomplete="off"></textarea>
            </label>
            <div class="inline-buttons full-width">
              <button type="submit" id="maintenanceSubmitButton">Submit request</button>
              <button type="button" id="maintenanceResetButton" class="secondary">Reset</button>
            </div>
            <div
              class="approver-notice"
              data-approver-notice="maintenance"
              role="alert"
              hidden
            ></div>
          </form>
        </div>
      </section>

      <section class="card" id="maintenanceRequestsCard">
        <div class="card-header">
          <div class="card-header-text">
            <span class="card-title">Maintenance pipeline</span>
            <span class="card-subtitle meta">See outstanding work orders and update when finished.</span>
          </div>
        </div>
        <div class="card-body">
          <div id="maintenanceRequestsList" class="list" role="list"></div>
          <button type="button" id="maintenanceMoreButton" class="load-more secondary">Load more</button>
        </div>
      </section>
    </div>
  </main>
  </div>
  <div id="toast" role="status" aria-live="polite"></div>

  <?!= include('scripts'); ?>
</body>
</html>
